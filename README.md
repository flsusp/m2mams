# m2mams - Machine to machine authentication made simple

This project aims to provide a standard mechanism for generating, storing and usage of asymetric cryptographic keys to provide safe authentication for machine to machine
communication over HTTPS. Along with this standard, it provides a set of implementations that makes it simple to use this standard in different projects.

The usage of asymetric keys is a key architectural decision on machine to machine authentication, since it is does not require secret tokens to be stored at the server side,
but just on the client side. Also the usage of HTTPS as the communication protocol makes it possible to use partial message signatures, since the protocol guarantees that
the overall message is authentic. So, the intent here is just to send within the HTTPS payload a signature that allows verifing that the user is who he says he is.

## Key Generation

The pair of assymetric keys (we are going to call it "key pair" from now on) that are going to be used for signing messages are generated at the client side. The key pair
contains two keys: a private key and a public one. The private key should be kept private at the client side and the public key can be send to the server and it is the
key that is going to be used to verify if the messages sent to the server were generated by the known clients.

There are two ways of generating the key pairs so m2mams is able to use the generated keys. The first way we are going to describe here uses openssh and does it manually.
The second one uses a simple command line utility to automate the same steps.

### Using Openssh

Requirements: you need openssh installed to execute the steps bellow.

1. Creates a folder in the user home directory with the any name. By default this directory is called `.m2mams`, but it can have any name that can be parameterized during
the lib execution.
1. Inside that folder executes the command `ssh-keygen -f <key-pair> -m RFC4716 -t rsa-sha2-512 -b 4096 -C "your_email@example.com"`, where the email is actually your identity that needs to be recognizable by the server and the `<key-pair>` represents the name of the key pair that is going to be generated.
1. Copy the content of the file `<key-pair>.pub` and register it on the server, using the desired storage mechanism. This is your public key.

### Using m2mams CLI

To be defined.